<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.lanou.mapper.ExportcMapper">
<cache/>
  <resultMap id="BaseResultMap" type="com.lanou.entity.Exportc">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Fri Jan 05 15:47:01 CST 2018.
    -->
    <id column="EXPORT_ID" jdbcType="VARCHAR" property="EXPORT_ID" />
    <result column="INPUT_DATE" jdbcType="TIMESTAMP" property="INPUT_DATE" />
    <result column="CONTRACT_IDS" jdbcType="VARCHAR" property="CONTRACT_IDS" />
    <result column="CUSTOMER_CONTRACT" jdbcType="VARCHAR" property="CUSTOMER_CONTRACT" />
    <result column="LCNO" jdbcType="VARCHAR" property="LCNO" />
    <result column="CONSIGNEE" jdbcType="VARCHAR" property="CONSIGNEE" />
    <result column="MARKS" jdbcType="VARCHAR" property="MARKS" />
    <result column="REMARK" jdbcType="VARCHAR" property="REMARK" />
    <result column="SHIPMENT_PORT" jdbcType="VARCHAR" property="SHIPMENT_PORT" />
    <result column="DESTINATION_PORT" jdbcType="VARCHAR" property="DESTINATION_PORT" />
    <result column="TRANSPORT_MODE" jdbcType="VARCHAR" property="TRANSPORT_MODE" />
    <result column="PRICE_CONDITION" jdbcType="VARCHAR" property="PRICE_CONDITION" />
    <result column="STATE" jdbcType="DECIMAL" property="STATE" />
    <result column="GROSS_WEIGHT" jdbcType="DECIMAL" property="GROSS_WEIGHT" />
    <result column="NET_WEIGHT" jdbcType="DECIMAL" property="NET_WEIGHT" />
    <result column="MEASUREMENT" jdbcType="DECIMAL" property="MEASUREMENT" />
    <result column="CREATE_BY" jdbcType="VARCHAR" property="CREATE_BY" />
    <result column="CREATE_DEPT" jdbcType="VARCHAR" property="CREATE_DEPT" />
    <result column="CREATE_TIME" jdbcType="TIMESTAMP" property="CREATE_TIME" />
  </resultMap>
  <sql id="Base_Column_List">
    EXPORT_ID, INPUT_DATE, CONTRACT_IDS, CUSTOMER_CONTRACT, LCNO, CONSIGNEE, MARKS, REMARK, 
    SHIPMENT_PORT, DESTINATION_PORT, TRANSPORT_MODE, PRICE_CONDITION, STATE, GROSS_WEIGHT, 
    NET_WEIGHT, MEASUREMENT, CREATE_BY, CREATE_DEPT, CREATE_TIME
  </sql>
  <select id="selectByExport" resultType="com.lanou.bean.ExportBean">
  	select t.export_id,
       t.lcno,
       t.customer_contract,
       t4.cnumber,
       t8.expNum,
       t.shipment_port,
       t.consignee,
       t.transport_mode,
       t.price_condition,
       t.input_date,
       t.shipment_port,
       t.state

  from export_c t
  left join (select sum(t3.cnumber) as cnumber, t2.export_id
               from export_c t2
              inner join export_product_c t3
             
                 on t3.export_id = t2.export_id
              group by t2.export_id) t4
    on t4.export_id = t.export_id

  left join (select sum(t7.cnumber) as expNum, t5.export_id
               from export_c t5
              inner join export_product_c t6
                 on t6.export_id = t5.export_id
              inner join ext_eproduct_c t7
                 on t6.export_product_id = t7.export_product_id
              group by t5.export_id) t8
    on t8.export_id = t.export_id ORDER BY t.input_date DESC

  </select>
  
  
  <!-- 根据报运单id查询报运单 -->
  <select id="selectByPrimaryKey" parameterType="java.lang.String" resultMap="BaseResultMap">
    select 
    <include refid="Base_Column_List" />
    from EXPORT_C
    where EXPORT_ID = #{EXPORT_ID,jdbcType=VARCHAR}
  </select>
  <!-- 根据id删除报运单 -->
  <delete id="deleteByPrimaryKey" parameterType="java.lang.String">
    delete from EXPORT_C
    where EXPORT_ID in
     <foreach collection="array" item="id" open="(" close=")" separator="," >
    #{id}
    </foreach>
  </delete>
  
  <!-- 修改状态 -->
  <update id="updateState" parameterType="java.lang.String">
  	
  	update EXPORT_C
    set STATE = '2' where EXPORT_ID in
  	 <foreach collection="array" item="id" open="(" close=")" separator="," >
    #{id}
    </foreach>
  
  
  </update>
  
  

  
  
  
  <insert id="insert" parameterType="com.lanou.entity.Exportc">
    insert into EXPORT_C (EXPORT_ID, INPUT_DATE, CONTRACT_IDS, 
      CUSTOMER_CONTRACT, LCNO, CONSIGNEE, 
      MARKS, REMARK, SHIPMENT_PORT, 
      DESTINATION_PORT, TRANSPORT_MODE, PRICE_CONDITION, 
      STATE, GROSS_WEIGHT, NET_WEIGHT, 
      MEASUREMENT, CREATE_BY, CREATE_DEPT, 
      CREATE_TIME)
    values (#{EXPORT_ID,jdbcType=VARCHAR}, #{INPUT_DATE,jdbcType=TIMESTAMP}, #{CONTRACT_IDS,jdbcType=VARCHAR}, 
      #{CUSTOMER_CONTRACT,jdbcType=VARCHAR}, #{LCNO,jdbcType=VARCHAR}, #{CONSIGNEE,jdbcType=VARCHAR}, 
      #{MARKS,jdbcType=VARCHAR}, #{REMARK,jdbcType=VARCHAR}, #{SHIPMENT_PORT,jdbcType=VARCHAR}, 
      #{DESTINATION_PORT,jdbcType=VARCHAR}, #{TRANSPORT_MODE,jdbcType=VARCHAR}, #{PRICE_CONDITION,jdbcType=VARCHAR}, 
      #{STATE,jdbcType=DECIMAL}, #{GROSS_WEIGHT,jdbcType=DECIMAL}, #{NET_WEIGHT,jdbcType=DECIMAL}, 
      #{MEASUREMENT,jdbcType=DECIMAL}, #{CREATE_BY,jdbcType=VARCHAR}, #{CREATE_DEPT,jdbcType=VARCHAR}, 
      #{CREATE_TIME,jdbcType=TIMESTAMP})
  </insert>
  <insert id="insertSelective" parameterType="com.lanou.entity.Exportc">
  
     <selectKey keyProperty="EXPORT_ID" 
    	resultType="java.lang.String" order="BEFORE">
        select sys_guid() from dual
    </selectKey>
    insert into EXPORT_C
    <trim prefix="(" suffix=")" suffixOverrides=",">
      <if test="EXPORT_ID != null">
        EXPORT_ID,
      </if>
      <if test="INPUT_DATE != null">
        INPUT_DATE,
      </if>
      <if test="CONTRACT_IDS != null">
        CONTRACT_IDS,
      </if>
      <if test="CUSTOMER_CONTRACT != null">
        CUSTOMER_CONTRACT,
      </if>
      <if test="LCNO != null">
        LCNO,
      </if>
      <if test="CONSIGNEE != null">
        CONSIGNEE,
      </if>
      <if test="MARKS != null">
        MARKS,
      </if>
      <if test="REMARK != null">
        REMARK,
      </if>
      <if test="SHIPMENT_PORT != null">
        SHIPMENT_PORT,
      </if>
      <if test="DESTINATION_PORT != null">
        DESTINATION_PORT,
      </if>
      <if test="TRANSPORT_MODE != null">
        TRANSPORT_MODE,
      </if>
      <if test="PRICE_CONDITION != null">
        PRICE_CONDITION,
      </if>
      <if test="STATE != null">
        STATE,
      </if>
      <if test="GROSS_WEIGHT != null">
        GROSS_WEIGHT,
      </if>
      <if test="NET_WEIGHT != null">
        NET_WEIGHT,
      </if>
      <if test="MEASUREMENT != null">
        MEASUREMENT,
      </if>
      <if test="CREATE_BY != null">
        CREATE_BY,
      </if>
      <if test="CREATE_DEPT != null">
        CREATE_DEPT,
      </if>
      <if test="CREATE_TIME != null">
        CREATE_TIME,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides=",">
      <if test="EXPORT_ID != null">
        #{EXPORT_ID,jdbcType=VARCHAR},
      </if>
      <if test="INPUT_DATE != null">
        #{INPUT_DATE,jdbcType=TIMESTAMP},
      </if>
      <if test="CONTRACT_IDS != null">
        #{CONTRACT_IDS,jdbcType=VARCHAR},
      </if>
      <if test="CUSTOMER_CONTRACT != null">
        #{CUSTOMER_CONTRACT,jdbcType=VARCHAR},
      </if>
      <if test="LCNO != null">
        #{LCNO,jdbcType=VARCHAR},
      </if>
      <if test="CONSIGNEE != null">
        #{CONSIGNEE,jdbcType=VARCHAR},
      </if>
      <if test="MARKS != null">
        #{MARKS,jdbcType=VARCHAR},
      </if>
      <if test="REMARK != null">
        #{REMARK,jdbcType=VARCHAR},
      </if>
      <if test="SHIPMENT_PORT != null">
        #{SHIPMENT_PORT,jdbcType=VARCHAR},
      </if>
      <if test="DESTINATION_PORT != null">
        #{DESTINATION_PORT,jdbcType=VARCHAR},
      </if>
      <if test="TRANSPORT_MODE != null">
        #{TRANSPORT_MODE,jdbcType=VARCHAR},
      </if>
      <if test="PRICE_CONDITION != null">
        #{PRICE_CONDITION,jdbcType=VARCHAR},
      </if>
      <if test="STATE != null">
        #{STATE,jdbcType=DECIMAL},
      </if>
      <if test="GROSS_WEIGHT != null">
        #{GROSS_WEIGHT,jdbcType=DECIMAL},
      </if>
      <if test="NET_WEIGHT != null">
        #{NET_WEIGHT,jdbcType=DECIMAL},
      </if>
      <if test="MEASUREMENT != null">
        #{MEASUREMENT,jdbcType=DECIMAL},
      </if>
      <if test="CREATE_BY != null">
        #{CREATE_BY,jdbcType=VARCHAR},
      </if>
      <if test="CREATE_DEPT != null">
        #{CREATE_DEPT,jdbcType=VARCHAR},
      </if>
      <if test="CREATE_TIME != null">
        #{CREATE_TIME,jdbcType=TIMESTAMP},
      </if>
    </trim>
  </insert>
  <update id="updateByPrimaryKeySelective" parameterType="com.lanou.entity.Exportc">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Fri Jan 05 15:47:01 CST 2018.
    -->
    update EXPORT_C
    <set>
      <if test="INPUT_DATE != null">
        INPUT_DATE = #{INPUT_DATE,jdbcType=TIMESTAMP},
      </if>
      <if test="CONTRACT_IDS != null">
        CONTRACT_IDS = #{CONTRACT_IDS,jdbcType=VARCHAR},
      </if>
      <if test="CUSTOMER_CONTRACT != null">
        CUSTOMER_CONTRACT = #{CUSTOMER_CONTRACT,jdbcType=VARCHAR},
      </if>
      <if test="LCNO != null">
        LCNO = #{LCNO,jdbcType=VARCHAR},
      </if>
      <if test="CONSIGNEE != null">
        CONSIGNEE = #{CONSIGNEE,jdbcType=VARCHAR},
      </if>
      <if test="MARKS != null">
        MARKS = #{MARKS,jdbcType=VARCHAR},
      </if>
      <if test="REMARK != null">
        REMARK = #{REMARK,jdbcType=VARCHAR},
      </if>
      <if test="SHIPMENT_PORT != null">
        SHIPMENT_PORT = #{SHIPMENT_PORT,jdbcType=VARCHAR},
      </if>
      <if test="DESTINATION_PORT != null">
        DESTINATION_PORT = #{DESTINATION_PORT,jdbcType=VARCHAR},
      </if>
      <if test="TRANSPORT_MODE != null">
        TRANSPORT_MODE = #{TRANSPORT_MODE,jdbcType=VARCHAR},
      </if>
      <if test="PRICE_CONDITION != null">
        PRICE_CONDITION = #{PRICE_CONDITION,jdbcType=VARCHAR},
      </if>
      <if test="STATE != null">
        STATE = #{STATE,jdbcType=DECIMAL},
      </if>
      <if test="GROSS_WEIGHT != null">
        GROSS_WEIGHT = #{GROSS_WEIGHT,jdbcType=DECIMAL},
      </if>
      <if test="NET_WEIGHT != null">
        NET_WEIGHT = #{NET_WEIGHT,jdbcType=DECIMAL},
      </if>
      <if test="MEASUREMENT != null">
        MEASUREMENT = #{MEASUREMENT,jdbcType=DECIMAL},
      </if>
      <if test="CREATE_BY != null">
        CREATE_BY = #{CREATE_BY,jdbcType=VARCHAR},
      </if>
      <if test="CREATE_DEPT != null">
        CREATE_DEPT = #{CREATE_DEPT,jdbcType=VARCHAR},
      </if>
      <if test="CREATE_TIME != null">
        CREATE_TIME = #{CREATE_TIME,jdbcType=TIMESTAMP},
      </if>
    </set>
    where EXPORT_ID = #{EXPORT_ID,jdbcType=VARCHAR}
  </update>
  <update id="updateByPrimaryKey" parameterType="com.lanou.entity.Exportc">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Fri Jan 05 15:47:01 CST 2018.
    -->
    update EXPORT_C
    set INPUT_DATE = #{INPUT_DATE,jdbcType=TIMESTAMP},
      CONTRACT_IDS = #{CONTRACT_IDS,jdbcType=VARCHAR},
      CUSTOMER_CONTRACT = #{CUSTOMER_CONTRACT,jdbcType=VARCHAR},
      LCNO = #{LCNO,jdbcType=VARCHAR},
      CONSIGNEE = #{CONSIGNEE,jdbcType=VARCHAR},
      MARKS = #{MARKS,jdbcType=VARCHAR},
      REMARK = #{REMARK,jdbcType=VARCHAR},
      SHIPMENT_PORT = #{SHIPMENT_PORT,jdbcType=VARCHAR},
      DESTINATION_PORT = #{DESTINATION_PORT,jdbcType=VARCHAR},
      TRANSPORT_MODE = #{TRANSPORT_MODE,jdbcType=VARCHAR},
      PRICE_CONDITION = #{PRICE_CONDITION,jdbcType=VARCHAR},
      STATE = #{STATE,jdbcType=DECIMAL},
      GROSS_WEIGHT = #{GROSS_WEIGHT,jdbcType=DECIMAL},
      NET_WEIGHT = #{NET_WEIGHT,jdbcType=DECIMAL},
      MEASUREMENT = #{MEASUREMENT,jdbcType=DECIMAL},
      CREATE_BY = #{CREATE_BY,jdbcType=VARCHAR},
      CREATE_DEPT = #{CREATE_DEPT,jdbcType=VARCHAR},
      CREATE_TIME = #{CREATE_TIME,jdbcType=TIMESTAMP}
    where EXPORT_ID = #{EXPORT_ID,jdbcType=VARCHAR}
  </update>
</mapper>